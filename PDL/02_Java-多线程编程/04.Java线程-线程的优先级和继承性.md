# Java线程-线程的优先级和继承性

## 1 Thread的优先级

**Java线程可以有优先级的设定，高优先级的线程比低优先级的线程有更高的几率得到执行。** 但是需要注意，**具体实现及可能产生的效果与操作系统和虚拟机版本有关。**

> Thread.setPriority()可能根本不做任何事情，这跟你的操作系统和虚拟机版本有关

> 线程优先级对于不同的线程调度器可能有不同的含义，可能并不是你直观的推测。特别地，优先级并不一定是指CPU的分享。在UNIX系统，优先级或多或少可以认为是CPU的分配，但Windows不是这样

> 线程的优先级通常是全局的和局部的优先级设定的组合。Java的setPriority()方法只应用于局部的优先级。换句话说，你不能在整个可能的范围 内设定优先级。（这通常是一种保护的方式，你大概不希望鼠标指针的线程或者处理音频数据的线程被其它随机的用户线程所抢占）

> 不同的系统有不同的线程优先级的取值范围，但是Java定义了10个级别（1-10）。这样就有可能出现几个线程在一个操作系统里有不同的优先级，在另外一个操作系统里却有相同的优先级（并因此可能有意想不到的行为）

> 操作系统可能（并通常这么做）根据线程的优先级给线程添加一些专有的行为（例如”only give a quantum boost if the priority is below X“）。这里再重复一次，优先级的定义有部分在不同系统间有差别。

> 大多数操作系统的线程调度器实际上执行的是在战略的角度上对线程的优先级做临时操作（例如当一个线程接收到它所等待的一个事件或者I/O），通常操作系统知道最多，试图手工控制优先级可能只会干扰这个系统。

> 你的应用程序通常不知道有哪些其它进程运行的线程，所以对于整个系统来说，变更一个线程的优先级所带来的影响是难于预测的。例如你可能发现，你有一个预期 为偶尔在后台运行的低优先级的线程几乎没有运行，原因是一个病毒监控程序在一个稍微高一点的优先级（但仍然低于普通的优先级）上运行，并且无法预计你程序 的性能，它会根据你的客户使用的防病毒程序不同而不同。

在 Java 语言中，线程的优先级范围是 1~10，值必须在 1~10，否则会出现异常；优先级的默认值为 5。优先级较高的线程会被优先执行，当执行完毕，才会轮到优先级较低的线程执行。如果优先级相同，那么就采用轮流执行的方式。

可以使用 Thread 类中的 setPriority() 方法来设置线程的优先级。语法如下：

```
public final void setPriority(int newPriority);
```

如果要获取当前线程的优先级，可以直接调用 getPriority() 方法。语法如下：

```
public final int getPriority();
```

## 2 优先级的继承性

Thread的优先级又继承性，即子Thread与其父Thread有相同的优先级。
