# Rust-表达式、语句和函数

在Rust中，表达式（Expressions）、语句（Statements）和函数（Functions）是构成程序的基础元素，他们在Rust中的定义和角色如下：

## 1 表达式与语句

**Rust的一个重要特性是几乎所有的代码都是由表达式组成的。Rust中的表达式（Expressions）和语句（Statements）之间的区别主要在于是否有返回值。**

* 表达式（Expressions）：表达式是一些代码片段，它们会进行一些计算并产生一个值。例如，简单的数学运算，变量引用，函数调用，函数定义、if条件、包括宏在内的复杂代码块等等。Rust的代码块（使用大括号包围的代码）是表达式，其值是最后一个表达式的值。

```rust
let x = 5;     // 声明语句。其中 x 是 5，因为 5 是一个表达式
let y = {
    let x = 3; // 这是一个语句，创建一个新的变量 x
    x + 1      // 这是一个表达式，它的值是 4
}; // 这个代码块的值（也就是表达式的值）是 4，因此，y 是 4
```

* 语句（Statements）：语句是进行一些操作但不返回值的代码片段。在Rust中，有两种类型的语句：声明语句和表达式语句。声明语句用于声明一个新的变量绑定，而表达式语句是由表达式后面跟随一个分号形成的（在 Rust 中，分号（;）有着特殊的意义。当你在一个表达式的末尾加上分号，那么它就变成了一个语句，而不再是表达式。分号会使表达式的值被抛弃）。

```rust
let x = 5;   // 这是一个声明语句
x + 1;       // 这是一个表达式语句，其值被丢弃
```

在上面的例子中，x + 1;这个表达式语句的值被丢弃了。如果我们去掉分号，这个表达式的值就会返回。

请注意，Rust语言中的大部分代码都是由表达式构成的，这是Rust与其他一些编程语言的一个主要区别。在其他一些语言中，语句通常不会返回值，或者需要使用特定的关键字（例如return）来返回值。

## 2 函数

* 函数（Functions）：函数是具有名称，可以接受一些参数（也可以没有参数）并返回一个值的代码块。函数可以多次调用，并且是组织和重用代码的主要工具。函数的最后一个表达式将成为函数的返回值，或者也可以在函数体中的任何地方使用return语句来指定函数的返回值。

例子：

```rust
fn add(x: i32, y: i32) -> i32 {
    x + y  // 表达式，作为函数的返回值
}

let result = add(5, 7);  // 函数调用语句，result 的值是 12
```
函数使用函数体中最后一个表达式作为返回值，除非使用return关键字提前指定。如果在函数或代码块的最后一个表达式后面添加一个分号，那么这个函数或代码块的返回值就会变成空tuple ()（被称为 unit）。例如：

```rust
fn foo() -> () {
    5;  // 这是一个表达式语句，其值被丢弃
}       // foo 的返回类型是 ()

fn bar() -> i32 {
    5   // 这是一个表达式，其值是 5
}       // bar 的返回类型是 i32
```


