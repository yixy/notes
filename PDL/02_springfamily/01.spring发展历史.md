# spring发展历史

## spring6 & springboot3

* 最低JDK17
* GraalVM支持（AOT、Native Image、泛语言支持）
* JavaEE迁移到JakartaEE9
* Micrometer支持：引入全新的可观测API并自动配置Micrometer追踪，包括对Brave、OpenTelemetry、Zipkin和Wavefront组件的支持。

### Native Image

新建一个 SpringBoot 3.0 的 Maven 工程，引入 parent、starter 依赖、以及两个重要的插件：

```pom.xml
<build>
  <plugins>
    <plugin>
      <groupId>org.graalvm.buildtools</groupId>
      <artifactId>native-maven-plugin</artifactId>
    </plugin>
    <plugin>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-maven-plugin</artifactId>
    </plugin>
  </plugins>
</build>
```

配置好GraalVM环境后编译二进制可执行文件。

```shell
mvn -Pnative clean native:compile
```

### gen OCI without Dockfile

配置镜像的名字，注意Docker 镜像名字中不能有大写字母：

```pom.xml
<properties>
  <maven.compiler.source>17</maven.compiler.source>
  <maven.compiler.target>17</maven.compiler.target>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  <spring-boot.build-image.imageName>springboot3demo</spring-boot.build-image.imageName>
</properties>
```

然后生成 Docker 镜像。

注意这种方式并不要求你机器上安装了 GraalVM，会由 SpringBoot 插件利用/paketo-buildpacks/native-image 来生成本地可执行文件，然后打入到容器中

```shell
mvn -Pnative spring-boot:build-image
```
