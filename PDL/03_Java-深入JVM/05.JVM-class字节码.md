# JVM-class字节码

Java类文件（.class）是一个包含Java字节码的可由Java虚拟机运行的文件。Java类文件是由Java编译器编译包含Java类的用Java语言编写的源文件后产生的。如果一个源文件有多个Java类，每个Java类都会被编译成一个单独的Java类文件。

## 1. class file

Java的类文件结构是一种以8位字节为基础单位的二进制流结构，其中包含了JVM指令集和符号表以及若干其他辅助信息，各个数据项目严格按照顺序紧凑地排列在Class文件之中，中间没有添加任何分隔符。作为一个通用的、机器无关的执行平台，任何其他语言的实现者都可以将JVM作为语言的产品交付媒介。虚拟机本身并不关心Class文件来源于何种语言。JVM通过Claas文件结构实现了平台无关性，即不同的编程语言实现的源代码，通过对应的编译器编译生成的`.class`文件，均可以在JVM上运行。

JVM规范规定，Class文件格式采用一种类似于C语言结构体的伪结构来存储数据，这种伪结构中只有两种数据类型：无符号数和表。

## 2. Magic Number及版本号

每个Class文件的头4个字节称为Magic Number，它的作用是确定这个文件是否为一个能被JVM接受的Class文件，其值为0xCAFEBABE。紧接着Magic Number的4个字节存储的是Class文件的版本号：第5和第6个字节是次版本号，第7和第8个字节是主版本号。Java的主版本号是从45开始的，JDK1.1之后的每个JDK大版本发布主版本号加1（JDK1.0-1.1使用了45.0-45.3的版本号），高版本的JDK能向下兼容以前版本的Class文件，但不能运行以后版本的class文件。

例如

```
//主版本51（jdk1.7编译），次版本0
cafe babe 0000 0033
```
