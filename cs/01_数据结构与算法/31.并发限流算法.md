# 并发限流

可以通过计数器实现并发数限流。

**同步计数器**简单、正确。实际上,它遵循了最简单、最基本的并发数据结构中常见的数据模式:它只是加了一把锁,在调用函数操作该数据结构时获取锁,从调用返回时释放锁。同步的计数器扩展性不好。线程更多时,性能更差。

可以使用**懒惰计数器(sloppy counter)**来实现更好的扩展性。通过多个局部计数器和一个全局计数器来实现一个逻辑计数器，懒惰计数器就是在准确性和性能之间折中。

同步计数器和懒惰计数器的更多讨论参见操作系统并发相关章节。
