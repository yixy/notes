# 输入输出-编程式IO #

## 1 基本IO操作技术 ##

基本IO操作技术：

* 编程式IO（programming IO）：在程序的直接、连续控制下发生IO操作。
* 中断式IO（interrupt-driven IO）：程序发出IO命令后继续执行其他指令，直到被IO硬件中断，通知它IO操作完成。
* 存储器直接存取（DMA）：这种情况下一个指定的IO处理器接替两IO操作的控制，在IO设备和存储器之间直接传送大量数据。

## 2 编程式IO ##

数据在处理器和IO模块间交换，处理器执行一个使它直接控制IO操作的程序，包括检测设备状态，发送读写命令以及传送数据。当处理器发送一个命令到IO模块时，它必须等待，直到IO操作完成。如果处理器快于IO模块，则处理器的时间就浪费了。

## 3 中断式IO ##

当处理器发送了一个IO命令到IO模块后，继续执行其他指令（这里假设有多个程序可以运行）。而当IO模块完成工作准备和处理器交换数据时，就去中断处理器请求服务。然后，处理器执行数据传送，最后再恢复它原来的处理工作。

## 4 DMA ##

对于编程式IO和中断式IO，处理器负责在输出时从主存向外界传送数据，输入时在主存中存储数据。而在DMA（direct memory access）模式下，IO模块和主存直接交换数据，不需要处理器参与。

DMA模式在系统总线上新增一个附加模块——DMA模块，它能模仿CPU接管CPU控制系统的任务。为了传送数据给主存或从主存传出，DMA模块需要控制总线。DMA模块只有在CPU不需要总线或强制CPU暂时挂起操作时才能使用总线。DMA模块通过一种周期窃用（cycle-stealing）技术，有效的窃用了一个总线周期，注意，这种情况下CPU不保存现场，也不做其他事，只是等待一个总线周期。