# 存储设备-磁盘阵列RAID、JBOD、UNRAID

RAID（Redundant Array of Inexpensive Disks）策略是用多个小容量磁盘代替一个大容量的磁盘，并且分布数据的方法，RAID能够同时从多个磁盘中存取数据，因而改善了IO性能。

![](https://raw.githubusercontent.com/yixy4app/images/picgo/202208272123967.jpg)

![](https://raw.githubusercontent.com/yixy4app/images/picgo/202208272123731.jpg)

![](https://raw.githubusercontent.com/yixy4app/images/picgo/202208272123020.jpg)

从容量、可靠性、性能三个方面考虑RAID评估。通常可使用RAID10，企业级可考虑RAID6。

| RAID类型 | 实现方式                      | 盘数量          | 备注                                           |
|----------|-------------------------------|-----------------|------------------------------------------------|
| RAID0    | 无冗余块拆分(条带化)          | n               |    数据分块存储，速度最快，容量最大，最不安全       |
| RAID1    | 镜像冗余                      | 1+n             | 镜像冗余可配多个，安全性和稳定性最高                             |
| RAID2    | 内存风格汉明码冗余(位拆分)    | n，数据冗余量为logn，校验码与数据在一起，相邻位不同盘，不能挂盘 | 实时编解码，硬件开销大，不常用                  |
| RAID3    | 位交叉奇偶校验                | n+1，校验盘挂磁盘阵列不可用  | 位拆分数据传输率是RAID1的N倍，但支持的IOPS较小，不常用 |
| RAID4    | 块交叉奇偶校验                | n+1，校验盘挂磁盘阵列不可用 | 不常用                  |
| RAID5    | 块交叉分布式奇偶校验        | n，数据中有1/3为冗余量，允许挂1块盘  | 读速度与RAID0相近，写入不如RAID0，重建磁盘时有URE错误概率，不推荐       |
| RAID6    | P+Q(在RAID5基础上，存储2套冗余算法) | n+2，允许挂掉2块盘             | 因为有额外冗余，安全性比RAID5高，性能比RAID5差 |
| RAID1+0  | 镜像冗余块拆分                | n+n，先RAID1后RAID0  | 对比RAID1，读写并发更高，但单盘故障影响更大    |

> 奇偶校验码：检错码，在每块增加1位校验码，一般进行配偶。

> 汉明码：纠错码，2^n位的块中，有logN个校验位，每个校验位通过指定校验不同行或列（二分思想）判断出错位。

![](https://raw.githubusercontent.com/yixy4app/images/picgo/IMG_8349.PNG)

## RAID0 ##

连续以位或字节为单位分割数据，并行读/写于多个磁盘上，单纯地提高性能，并没有为数据的可靠性提供保证，而且其中的一个磁盘失效将影响到所有数据。至少需要2个驱动器组建。

## RAID1 ##

通过磁盘数据镜像实现数据冗余，在成对的独立磁盘上产生互为备份的数据。当原始数据繁忙时，可直接从镜像拷贝中读取数据，因此RAID 1可以提高读取性能。RAID 1是磁盘阵列中单位成本最高的，但提供了很高的数据安全性和可用性。当一个磁盘失效时，系统可以自动切换到镜像磁盘上读写，而不需要重组失效的数据。至少需要2个驱动器组建。

## JBOD

Just bond of disks，将多个硬盘识别为一块大硬盘，其容量是所有硬盘的和。第一块磁盘有阵列元数据信息，挂掉磁盘阵列整体不可用。每次基本仅读写一个磁盘。

读写速度和单盘差不多，安全性较低。

## UNRAID

带校验盘的JBOD,校验盘要求容量比其他单块盘大，但是需要购买授权收费。

写入速度比JBOD慢，可能是所有阵列类型中最慢的。