# vim为什么会自动添加行结束符 #

用vim编辑一个文件，内容是hello world，然后保存退出，vim会在world之后添加一个\n，为什么？

这是 Windows 和 Linux 对文本文件的定义区别。

* Windows 认为 \n 是文本行之间的“分隔符”， 所以只有两行之间才需要 \n，一行文本不需要 \n。Windows 中具有 10 行的文本应该有 9 个 \n “分隔符”。
* Linux 认为 \n 是文本行的“结束符”，一个有效的文本行必须包含 \n 符号，否则根本不是个有效的文本文件。Linux 中具有 10 行的文本应该有 10 个 \n “结束符”。

vim 遵循的是 Linux 的定义，结尾没有 \n 的文本文件不是一个合法的文本文件，因此必须加上。当然，vim提供选项禁止这个行为，不过这样产生的文本对某些工具不兼容。比如，最后一行没有\n的话，cat多个文件的时候会分不清文件界线，cat单个文件的时候终端的提示符会停在最后一个字符后面，显得很奇怪。

> 在 Unix 以及 Linux shell 下非常常见的一种操作是用 cat 把两个文件连接起来。砍掉 EOF 之后，如果第一个文件的结尾没有 \n，那么第二个文件的第一行就会贴到第一个文件的最后一行之后，这样就很容易引发问题。如果需要跨平台处理类似的问题，一个常见的做法是在可能接在后面的文件前面加一行注释或者留一个空行，这样万一第一行跟在后面也不会造成很大影响。
